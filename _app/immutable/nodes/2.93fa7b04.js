import{S as me,i as _e,s as ge,k as o,a as g,q as x,l as a,m as f,c as E,r as L,h as s,n as l,b as M,G as t,J as he,u as Ee,H as ee,K as ye,y as be,z as Se,A as Ie,g as Ne,d as Ae,B as Pe}from"../chunks/index.c5ca82e2.js";import{b as xe}from"../chunks/paths.8d2e3aac.js";function Le(S){let c,v,i,m,y,d,n,h,e,r,p,u,b,R,j,q,C,U,H,z,I,k,J,N,D,F,_,w,Y,K,B,T,Q,W,X,Z,te;return{c(){c=o("div"),v=o("form"),i=o("div"),m=o("br"),y=g(),d=o("div"),n=o("input"),h=g(),e=o("label"),r=x("Address"),p=g(),u=o("div"),b=o("div"),R=o("button"),j=x("Address Search"),q=g(),C=o("div"),U=o("button"),H=x("ðŸ§­ Locate Me"),z=g(),I=o("span"),k=x(S[0]),J=g(),N=o("div"),D=o("div"),F=o("div"),_=o("div"),w=o("p"),Y=x("Your NPU is:"),K=g(),B=o("a"),T=o("h1"),Q=x("results go here"),W=g(),X=o("br"),this.h()},l($){c=a($,"DIV",{});var A=f(c);v=a(A,"FORM",{class:!0});var se=f(v);i=a(se,"DIV",{class:!0});var O=f(i);m=a(O,"BR",{}),y=E(O),d=a(O,"DIV",{class:!0});var P=f(d);n=a(P,"INPUT",{id:!0,type:!0,class:!0}),h=E(P),e=a(P,"LABEL",{for:!0});var re=f(e);r=L(re,"Address"),re.forEach(s),p=E(P),u=a(P,"DIV",{class:!0});var G=f(u);b=a(G,"DIV",{class:!0});var oe=f(b);R=a(oe,"BUTTON",{class:!0});var ae=f(R);j=L(ae,"Address Search"),ae.forEach(s),oe.forEach(s),q=E(G),C=a(G,"DIV",{class:!0});var ne=f(C);U=a(ne,"BUTTON",{class:!0});var le=f(U);H=L(le,"ðŸ§­ Locate Me"),le.forEach(s),ne.forEach(s),G.forEach(s),z=E(P),I=a(P,"SPAN",{id:!0,class:!0,"data-error":!0});var ce=f(I);k=L(ce,S[0]),ce.forEach(s),P.forEach(s),O.forEach(s),se.forEach(s),J=E(A),N=a(A,"DIV",{id:!0,class:!0});var ie=f(N);D=a(ie,"DIV",{class:!0});var de=f(D);F=a(de,"DIV",{class:!0});var ue=f(F);_=a(ue,"DIV",{class:!0});var V=f(_);w=a(V,"P",{});var fe=f(w);Y=L(fe,"Your NPU is:"),fe.forEach(s),K=E(V),B=a(V,"A",{id:!0});var ve=f(B);T=a(ve,"H1",{id:!0});var pe=f(T);Q=L(pe,"results go here"),pe.forEach(s),ve.forEach(s),W=E(V),X=a(V,"BR",{}),V.forEach(s),ue.forEach(s),de.forEach(s),ie.forEach(s),A.forEach(s),this.h()},h(){l(n,"id","address"),l(n,"type","text"),l(n,"class",""),l(e,"for","Address"),l(R,"class","btn green m-2"),l(b,"class","col"),l(U,"class","btn blue m-2"),l(C,"class","col"),l(u,"class","row"),l(I,"id","geoStatus"),l(I,"class","helper-text"),l(I,"data-error","Can't get your location.."),l(d,"class","input-field col s6"),l(i,"class","row m2"),l(v,"class","col s12"),l(T,"id","results"),l(B,"id","npuLink"),l(_,"class","card-content"),l(F,"class","card svelte-12psz9g"),l(D,"class","col s3"),l(N,"id","npuCard"),l(N,"class","row center-align"),N.hidden=!0},m($,A){M($,c,A),t(c,v),t(v,i),t(i,m),t(i,y),t(i,d),t(d,n),t(d,h),t(d,e),t(e,r),t(d,p),t(d,u),t(u,b),t(b,R),t(R,j),t(u,q),t(u,C),t(C,U),t(U,H),t(d,z),t(d,I),t(I,k),t(c,J),t(c,N),t(N,D),t(D,F),t(F,_),t(_,w),t(w,Y),t(_,K),t(_,B),t(B,T),t(T,Q),t(_,W),t(_,X),Z||(te=[he(R,"click",S[2]),he(U,"click",S[1],{once:!0})],Z=!0)},p($,[A]){A&1&&Ee(k,$[0])},i:ee,o:ee,d($){$&&s(c),Z=!1,ye(te)}}}function Re(S,c,v){let i="Find your location";function m(){if(!navigator.geolocation){v(0,i="Geolocation is not supported by your browser");return}function n(e){const r=e.coords.latitude,p=e.coords.longitude;return v(0,i="Location found: "+r.toFixed(2)+", "+p.toFixed(2)),d(r,p),p}function h(){v(0,i="Unable to retrieve your location")}navigator.geolocation.getCurrentPosition(n,h)}function y(){let n=document.getElementById("address").value;if(n==""){v(0,i="Please enter an address");return}let e=`https://gis.atlantaga.gov/dpcd/rest/services/SiteAddressPoint/GeocodeServer/findAddressCandidates?Street=&Single+Line+Input=${encodeURIComponent(n)}&maxLocations=1&matchOutOfRange=true&inSR=4130&outSR=4130&f=pjson`;console.log(e),fetch(e).then(r=>r.json()).then(r=>{console.log(r);const p=r.candidates[0].location.y,u=r.candidates[0].location.x;p&&u?(v(0,i="Location found: "+p.toFixed(2)+", "+u.toFixed(2)),d(p,u)):results.innerText="Not Found!?"})}function d(n,h){let e=document.getElementById("results"),r=document.getElementById("npuCard"),p=document.getElementById("npuLink");fetch(`https://services5.arcgis.com/5RxyIIJ9boPdptdo/arcgis/rest/services/Official_NPU/FeatureServer/0/query?where=1%3D1&outFields=NAME&geometry=${h}%2C${n}%2C${h}%2C${n}&geometryType=esriGeometryEnvelope&inSR=4130&spatialRel=esriSpatialRelIntersects&returnGeometry=false&outSR=4130&f=json`).then(u=>u.json()).then(u=>{console.log(u),u.features[0].attributes.NAME?console.log("NPU:"+u.features[0].attributes.NAME):console.log("not found");let b=u.features[0].attributes.NAME;e.innerText=b,r.style.display="block",p.href=`${xe}/${b}`,u.features[0].attributes.NAME||(e.innerText="Not Found!?")})}return[i,m,y]}class Ue extends me{constructor(c){super(),_e(this,c,Re,Le,ge,{})}}function $e(S){let c,v,i,m,y,d,n,h;return n=new Ue({}),{c(){c=o("h1"),v=x("NPU Locator"),i=g(),m=o("p"),y=x("Search for your address below, or use your current location!"),d=g(),be(n.$$.fragment)},l(e){c=a(e,"H1",{});var r=f(c);v=L(r,"NPU Locator"),r.forEach(s),i=E(e),m=a(e,"P",{});var p=f(m);y=L(p,"Search for your address below, or use your current location!"),p.forEach(s),d=E(e),Se(n.$$.fragment,e)},m(e,r){M(e,c,r),t(c,v),M(e,i,r),M(e,m,r),t(m,y),M(e,d,r),Ie(n,e,r),h=!0},p:ee,i(e){h||(Ne(n.$$.fragment,e),h=!0)},o(e){Ae(n.$$.fragment,e),h=!1},d(e){e&&s(c),e&&s(i),e&&s(m),e&&s(d),Pe(n,e)}}}class Fe extends me{constructor(c){super(),_e(this,c,null,$e,ge,{})}}export{Fe as component};
